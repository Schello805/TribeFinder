@import "tailwindcss";

/* Define the dark variant to use class strategy */
@variant dark (&:where(.dark, .dark *));

:root {
  --background: #ffffff;
  --foreground: #171717;
  --surface: #ffffff;
  --surface-2: #f6f6f6;
  --surface-hover: #f1f1f1;
  --muted: #6b7280;
  --border: #e5e7eb;
  --primary: #4f46e5;
  --primary-hover: #4338ca;
  --primary-active: #3730a3;
  --primary-foreground: #ffffff;
  --link: #4f46e5;
  --nav-bg: #4f46e5;
  --nav-fg: #ffffff;
  --nav-muted: rgba(255,255,255,0.8);
  --nav-border: rgba(255,255,255,0.18);
  --footer-bg: #111827;
  --footer-fg: #e5e7eb;
  --footer-muted: #9ca3af;
  --footer-border: #1f2937;
  color-scheme: light;
}

html[data-tf-theme="sahara"] {
  --background: #f6efe4;
  --foreground: #2b1d12;
  --surface: #fbf6ee;
  --surface-2: #f2e7d8;
  --surface-hover: #eadcca;
  --muted: #6b5647;
  --border: #d8c7b3;
  --primary: #8c5a2b;
  --primary-hover: #7a4c24;
  --primary-active: #6a411f;
  --primary-foreground: #fff7ec;
  --link: #7a4c24;
  --nav-bg: #7a4c24;
  --nav-fg: #fff7ec;
  --nav-muted: rgba(255,247,236,0.82);
  --nav-border: rgba(255,247,236,0.18);
  --footer-bg: #2b1d12;
  --footer-fg: #f2e7db;
  --footer-muted: rgba(242,231,219,0.75);
  --footer-border: rgba(242,231,219,0.12);
}

html[data-tf-theme="copper"] {
  --background: #f1e6d7;
  --foreground: #2a1a10;
  --surface: #f7efe4;
  --surface-2: #ead8c2;
  --surface-hover: #e3cfb6;
  --muted: #6a4b3a;
  --border: #d7bfa6;
  --primary: #8b4e2c;
  --primary-hover: #7a3f22;
  --primary-active: #6a351d;
  --primary-foreground: #fff5ea;
  --link: #7a3f22;
  --nav-bg: #6f341a;
  --nav-fg: #fff5ea;
  --nav-muted: rgba(255,245,234,0.82);
  --nav-border: rgba(255,245,234,0.18);
  --footer-bg: #2a1a10;
  --footer-fg: #f1e6d7;
  --footer-muted: rgba(241,230,215,0.75);
  --footer-border: rgba(241,230,215,0.12);
}

html[data-tf-theme="nocturne"] {
  --background: #3a1750;
  --foreground: #f2e7f6;
  --surface: #44205d;
  --surface-2: #51286d;
  --surface-hover: #5e3380;
  --muted: rgba(242,231,246,0.7);
  --border: rgba(242,231,246,0.16);
  --primary: #a86bd9;
  --primary-hover: #b887e6;
  --primary-active: #8f55bf;
  --primary-foreground: #120613;
  --link: #c79af0;
  --nav-bg: #2e1040;
  --nav-fg: #f2e7f6;
  --nav-muted: rgba(242,231,246,0.75);
  --nav-border: rgba(242,231,246,0.14);
  --footer-bg: #240b33;
  --footer-fg: #f2e7f6;
  --footer-muted: rgba(242,231,246,0.7);
  --footer-border: rgba(242,231,246,0.12);
  --font-display: var(--font-display-nocturne);
  color-scheme: dark;
}

.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
  --surface: #111827;
  --surface-2: #0b1220;
  --surface-hover: #17213a;
  --muted: #9ca3af;
  --border: #374151;
  --primary: #818cf8;
  --primary-hover: #6366f1;
  --primary-active: #4f46e5;
  --primary-foreground: #0b1020;
  --link: #a5b4fc;
  --nav-bg: #111827;
  --nav-fg: #ffffff;
  --nav-muted: rgba(255,255,255,0.78);
  --nav-border: rgba(255,255,255,0.12);
  --footer-bg: #0b1220;
  --footer-fg: #e5e7eb;
  --footer-muted: #9ca3af;
  --footer-border: #111827;
  color-scheme: dark;
}

html.dark[data-tf-theme="sahara"] {
  --background: #19110b;
  --foreground: #f2e7db;
  --surface: #21160e;
  --surface-2: #2a1b11;
  --surface-hover: #322013;
  --muted: rgba(242,231,219,0.7);
  --border: rgba(242,231,219,0.16);
  --primary: #d2a36b;
  --primary-hover: #e0b480;
  --primary-active: #c9955c;
  --primary-foreground: #1a120b;
  --link: #e0b480;
  --nav-bg: #2a1b11;
  --nav-fg: #f2e7db;
  --nav-muted: rgba(242,231,219,0.75);
  --nav-border: rgba(242,231,219,0.14);
  --footer-bg: #150e08;
  --footer-fg: #f2e7db;
  --footer-muted: rgba(242,231,219,0.7);
  --footer-border: rgba(242,231,219,0.12);
}

html.dark[data-tf-theme="copper"] {
  --background: #140d08;
  --foreground: #f1e6d7;
  --surface: #1a110b;
  --surface-2: #24170f;
  --surface-hover: #2c1c12;
  --muted: rgba(241,230,215,0.7);
  --border: rgba(241,230,215,0.16);
  --primary: #d7a16d;
  --primary-hover: #e2b587;
  --primary-active: #c9915f;
  --primary-foreground: #140d08;
  --link: #e2b587;
  --nav-bg: #24170f;
  --nav-fg: #f1e6d7;
  --nav-muted: rgba(241,230,215,0.75);
  --nav-border: rgba(241,230,215,0.14);
  --footer-bg: #0f0905;
  --footer-fg: #f1e6d7;
  --footer-muted: rgba(241,230,215,0.7);
  --footer-border: rgba(241,230,215,0.12);
}

html.dark[data-tf-theme="nocturne"] {
  --background: #3a1750;
  --foreground: #f2e7f6;
  --surface: #44205d;
  --surface-2: #51286d;
  --surface-hover: #5e3380;
  --muted: rgba(242,231,246,0.7);
  --border: rgba(242,231,246,0.16);
  --primary: #a86bd9;
  --primary-hover: #b887e6;
  --primary-active: #8f55bf;
  --primary-foreground: #120613;
  --link: #c79af0;
  --nav-bg: #2e1040;
  --nav-fg: #f2e7f6;
  --nav-muted: rgba(242,231,246,0.75);
  --nav-border: rgba(242,231,246,0.14);
  --footer-bg: #240b33;
  --footer-fg: #f2e7f6;
  --footer-muted: rgba(242,231,246,0.7);
  --footer-border: rgba(242,231,246,0.12);
  --font-display: var(--font-display-nocturne);
}

html[data-tf-theme="copper"],
html.dark[data-tf-theme="copper"] {
  --font-display: var(--font-display-copper);
}

.tf-gothic-btn {
  position: relative;
}

html[data-tf-theme="nocturne"] .tf-gothic-btn,
html.dark[data-tf-theme="nocturne"] .tf-gothic-btn {
  border-radius: 8px !important;
  clip-path: polygon(
    6px 0,
    calc(100% - 6px) 0,
    100% 6px,
    100% calc(100% - 6px),
    calc(100% - 10px) 100%,
    6px 100%,
    0 calc(100% - 6px),
    0 6px
  );
  box-shadow:
    0 10px 26px rgba(0,0,0,0.35),
    0 0 0 1px rgba(242,231,246,0.14) inset;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

h1, h2, h3, .tf-display {
  font-family: var(--font-display, inherit);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: inherit;
}

/* Force Input Colors - High Specificity & Autofill Fixes */
input, textarea, select {
  color: var(--foreground) !important;
  background-color: var(--surface);
}

/* Dark mode overrides for inputs */
.dark input, .dark textarea, .dark select {
  color: var(--foreground) !important;
  background-color: var(--surface);
}

/* Placeholder overrides */
input::placeholder, textarea::placeholder, select::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
}

.dark input::placeholder, .dark textarea::placeholder, .dark select::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
}

/* Fix Chrome/Safari Autofill colors */
input:-webkit-autofill,
input:-webkit-autofill:hover, 
input:-webkit-autofill:focus, 
input:-webkit-autofill:active {
  -webkit-text-fill-color: var(--foreground) !important;
  -webkit-box-shadow: 0 0 0px 1000px var(--surface) inset !important;
  transition: background-color 5000s ease-in-out 0s;
}

.dark input:-webkit-autofill,
.dark input:-webkit-autofill:hover, 
.dark input:-webkit-autofill:focus, 
.dark input:-webkit-autofill:active {
  -webkit-text-fill-color: var(--foreground) !important;
  -webkit-box-shadow: 0 0 0px 1000px var(--surface) inset !important;
}

/* FINAL OVERRIDES - NO LAYER - MAX SPECIFICITY */
html body input, 
html body textarea, 
html body select {
  color: var(--foreground) !important;
  opacity: 1 !important;
  -webkit-text-fill-color: var(--foreground) !important;
  caret-color: var(--foreground) !important;
}

html.dark body input, 
html.dark body textarea, 
html.dark body select {
  color: var(--foreground) !important;
  opacity: 1 !important;
  -webkit-text-fill-color: var(--foreground) !important;
  caret-color: var(--foreground) !important;
}

/* Placeholder overrides */
html body ::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
  -webkit-text-fill-color: var(--muted) !important;
}

html.dark body ::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
  -webkit-text-fill-color: var(--muted) !important;
}

/* Toast Animations */
@keyframes slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in {
  animation: slide-in 0.3s ease-out;
}

/* Skeleton Loader */
@keyframes skeleton-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.skeleton {
  animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
  background-size: 200% 100%;
}

.dark .skeleton {
  background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
  background-size: 200% 100%;
}

/* Leaflet marker icons can break due to global/tailwind img rules (e.g. max-width: 100%). */
.leaflet-container img {
  max-width: none !important;
}

.leaflet-container .leaflet-marker-icon,
.leaflet-container .leaflet-marker-shadow {
  max-width: none !important;
}

.leaflet-container .leaflet-tile-pane {
  z-index: 10;
}

.leaflet-container .leaflet-top,
.leaflet-container .leaflet-bottom {
  z-index: 40;
}

.leaflet-container .leaflet-overlay-pane {
  z-index: 20;
}

.leaflet-container .leaflet-marker-pane {
  z-index: 30;
}

.leaflet-container .leaflet-popup-pane {
  z-index: 40;
}

.leaflet-container .leaflet-control {
  z-index: 45;
}

.tf-location-marker {
  width: 18px;
  height: 18px;
  border-radius: 9999px;
  background: #2563eb;
  border: 2px solid #ffffff;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35);
}
